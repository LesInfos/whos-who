{"ast":null,"code":"import _asyncToGenerator from \"M:/August Cohort/angular-whos-who-aug-2024-team-4/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport fetchFromSpotify, { request } from \"../../services/api\";\nimport { Validators } from \"@angular/forms\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../components/button/button.component\";\n\nfunction HomeComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Loading...\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HomeComponent_div_5_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const genre_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", genre_r5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", genre_r5, \" \");\n  }\n}\n\nfunction HomeComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵtext(1, \" Genre: \");\n    i0.ɵɵelementStart(2, \"select\", 8);\n    i0.ɵɵelement(3, \"option\", 9);\n    i0.ɵɵtemplate(4, HomeComponent_div_5_option_4_Template, 2, 2, \"option\", 10);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.form);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.genres);\n  }\n}\n\nfunction HomeComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵtext(1, \" Difficulty: \");\n    i0.ɵɵelementStart(2, \"select\", 11)(3, \"option\", 12);\n    i0.ɵɵtext(4, \"Easy\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"option\", 13);\n    i0.ɵɵtext(6, \"Medium\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"option\", 14);\n    i0.ɵɵtext(8, \"Hard\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r2.form);\n  }\n}\n\nfunction HomeComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtext(1, \" Please select a genre before starting the game. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst AUTH_ENDPOINT = \"https://nuod0t2zoe.execute-api.us-east-2.amazonaws.com/FT-Classroom/spotify-auth-token\";\nconst TOKEN_KEY = \"whos-who-access-token\";\nexport class HomeComponent {\n  constructor(router, fb) {\n    var _this = this;\n\n    this.router = router;\n    this.fb = fb;\n    this.genres = [];\n    this.selectedGenre = \"\";\n    this.selectedDifficulty = \"medium\";\n    this.authLoading = false;\n    this.configLoading = false;\n    this.token = \"\";\n    this.artistList = {\n      Pop: [\"Taylor Swift\", \"Justin Bieber\"],\n      Rock: [\"Linkin Park\", \"The Neighbourhood\", \"Deftones\", \"Green Day\", \"Red Hot Chili Peppers\", \"Metallica\", \"Radiohead\", \"Dominic Fike\", \"System Of A Down\", \"Nickelback\", \"Paramore\", \"Slipknot\", \"Gorillaz\", \"Cage The Elephant\", \"My Chemical Romance\", \"Three Days Grace\", \"Bring Me The Horizon\", \"Led Zeppelin\", \"AC/DC\", \"Foo Fighters\", \"Muse\", \"Alice in Chains\", \"Rage Against the Machine\"],\n      Jpop: [\"Ado\", \"Yorushika\", \"Reol\", \"Aimer\"]\n    };\n\n    this.loadGenres = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (t) {\n        _this.configLoading = true;\n        _this.genres = [\"Pop\", \"Rock\", \"Jpop\"];\n        _this.configLoading = false;\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    this.form = this.fb.group({\n      genre: [\"\", Validators.required]\n    });\n  }\n\n  ngOnInit() {\n    // Subscribe to valueChanges to call setGenre() whenever the genre changes\n    this.form.get(\"genre\")?.valueChanges.subscribe(value => {\n      console.log(\"Value changed to:\", value);\n      this.setGenre(value);\n    });\n    this.authLoading = true;\n    const storedTokenString = localStorage.getItem(TOKEN_KEY);\n\n    if (storedTokenString) {\n      const storedToken = JSON.parse(storedTokenString);\n\n      if (storedToken.expiration > Date.now()) {\n        console.log(\"Token found in localstorage\");\n        this.authLoading = false;\n        this.token = storedToken.value;\n        this.loadGenres(storedToken.value);\n        return;\n      }\n    }\n\n    console.log(\"Sending request to AWS endpoint\");\n    request(AUTH_ENDPOINT).then(({\n      access_token,\n      expires_in\n    }) => {\n      const newToken = {\n        value: access_token,\n        expiration: Date.now() + (expires_in - 20) * 1000\n      };\n      localStorage.setItem(TOKEN_KEY, JSON.stringify(newToken));\n      this.authLoading = false;\n      this.token = newToken.value;\n      this.loadGenres(newToken.value);\n    });\n  }\n\n  setGenre(selectedGenre) {\n    this.selectedGenre = selectedGenre;\n    console.log(this.selectedGenre); //console.log(TOKEN_KEY);\n  }\n\n  setDifficulty(selectedDifficulty) {\n    this.selectedDifficulty = selectedDifficulty;\n    console.log(this.selectedDifficulty);\n  }\n\n  startGame() {\n    // if (!this.selectedGenre || !this.selectedDifficulty) {\n    //   return;\n    // }\n    // if (this.form.valid){\n    this.fetchTracks(); // }\n  }\n\n  fetchTracks(attempts = 1) {\n    const maxAttempts = 5;\n    const artists = this.artistList[this.selectedGenre];\n    const randomArtist = artists[Math.floor(Math.random() * artists.length)];\n    const endpoint = `search`;\n    const params = {\n      //q: 'Creedence Clearwater Revival',\n      q: `artist:${randomArtist}`,\n      type: \"track\",\n      limit: 1\n    };\n    fetchFromSpotify({\n      token: this.token,\n      endpoint,\n      params\n    }).then(data => {\n      const track = data.tracks.items[0];\n\n      if (track && track.preview_url) {\n        this.navigateToPlayPage(track, artists);\n      } else {\n        console.log(data);\n        console.error(\"No track preview available for the selected artist.\");\n\n        if (attempts < maxAttempts) {\n          console.log(\"retrying\");\n          this.fetchTracks(attempts + 1);\n        }\n      }\n    }).catch(error => {\n      console.error(\"Error fetching tracks:\", error);\n\n      if (attempts < maxAttempts) {\n        console.log(\"retrying\");\n        this.fetchTracks(attempts + 1);\n      }\n    });\n  }\n\n  navigateToPlayPage(track, artists) {\n    const numOptions = this.getNumberOfChoices();\n    const correctArtist = track.artists[0].name;\n    const wrongChoices = artists.filter(artist => artist !== correctArtist);\n    const shuffledChoices = this.shuffleArray([...wrongChoices]).slice(0, numOptions - 1);\n    shuffledChoices.push(correctArtist);\n    const options = this.shuffleArray(shuffledChoices);\n    console.log(\"Navigating to play with state:\", {\n      track: track,\n      options: options,\n      correctArtist: correctArtist,\n      genre: this.selectedGenre,\n      token: this.token\n    });\n    this.router.navigate([\"play\"], {\n      state: {\n        track: track,\n        options: options,\n        diffculty: this.selectedDifficulty,\n        correctArtist: correctArtist,\n        genre: this.selectedGenre,\n        token: this.token\n      }\n    });\n  }\n\n  getNumberOfChoices() {\n    switch (this.selectedDifficulty) {\n      case \"easy\":\n        return 3;\n\n      case \"medium\":\n        return 4;\n\n      case \"hard\":\n        return 5;\n\n      default:\n        return 4;\n    }\n  }\n\n  shuffleArray(array) {\n    return array.sort(() => Math.random() - 0.5);\n  }\n\n}\n\nHomeComponent.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.FormBuilder));\n};\n\nHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HomeComponent,\n  selectors: [[\"app-home\"]],\n  decls: 12,\n  vars: 4,\n  consts: [[4, \"ngIf\"], [1, \"main-container\"], [3, \"formGroup\", 4, \"ngIf\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"buttonText\", \"Play\", 3, \"click\"], [\"buttonText\", \"Leaderboard\", \"routerLink\", \"/leaderboard\"], [\"buttonText\", \"Game Over\", \"routerLink\", \"/gameover\"], [3, \"formGroup\"], [\"formControlName\", \"genre\"], [3, \"value\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"formControlName\", \"difficulty\"], [\"value\", \"easy\"], [\"value\", \"medium\"], [\"value\", \"hard\"], [1, \"error-message\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, HomeComponent_div_0_Template, 2, 0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\")(3, \"h1\");\n      i0.ɵɵtext(4, \"Who's Who\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(5, HomeComponent_div_5_Template, 5, 2, \"div\", 2);\n      i0.ɵɵtemplate(6, HomeComponent_div_6_Template, 9, 1, \"div\", 2);\n      i0.ɵɵtemplate(7, HomeComponent_div_7_Template, 2, 0, \"div\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\")(9, \"app-button\", 4);\n      i0.ɵɵlistener(\"click\", function HomeComponent_Template_app_button_click_9_listener() {\n        return ctx.startGame();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(10, \"app-button\", 5)(11, \"app-button\", 6);\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.authLoading || ctx.configLoading);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", !ctx.authLoading && !ctx.configLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.authLoading && !ctx.configLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showError);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i1.RouterLink, i2.FormGroupDirective, i2.FormControlName, i4.ButtonComponent],\n  styles: [\"@import url(\\\"https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap\\\");\\n\\nbody[_ngcontent-%COMP%] {\\r\\n  font-family: \\\"Source Code Pro\\\", monospace;\\r\\n  color: #b3b3b3;\\r\\n  overflow-x: hidden;\\r\\n  margin: 0;\\r\\n  padding: 0;\\r\\n  background-color: #212121;\\r\\n}\\n\\n[_ngcontent-%COMP%]:root {\\r\\n  --arrow-bg: #486581;\\r\\n  --arrow-icon: url(https://upload.wikimedia.org/wikipedia/commons/9/9d/Caret_down_font_awesome_whitevariation.svg);\\r\\n  --option-bg: #212121;\\r\\n  --select-bg: rgba(255, 255, 255, 0.2);\\r\\n}\\nselect[_ngcontent-%COMP%] {\\r\\n  \\r\\n  -webkit-appearance: none;\\r\\n          appearance: none;\\r\\n  border: 0;\\r\\n  outline: 0;\\r\\n  font: inherit;\\r\\n  \\r\\n  \\r\\n  padding: 1rem 4rem 1rem 1rem;\\r\\n  background: var(--arrow-icon) no-repeat right 0.8em center / 1.4em,\\r\\n    linear-gradient(to left, var(--arrow-bg) 3em, var(--select-bg) 3em);\\r\\n  color: white;\\r\\n  border-radius: 0.25em;\\r\\n  box-shadow: 0 0 1em 0 rgba(0, 0, 0, 0.2);\\r\\n  cursor: pointer;\\r\\n  \\r\\n  &::-ms-expand {\\r\\n    display: none;\\r\\n  }\\r\\n  \\r\\n  &:focus {\\r\\n    outline: none;\\r\\n  }\\r\\n  \\r\\n  option {\\r\\n    color: inherit;\\r\\n    background-color: var(--option-bg);\\r\\n  }\\r\\n}\\n.main-container[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n  height: 100vh;\\r\\n}\\n\\n.button[_ngcontent-%COMP%] {\\r\\n  -webkit-appearance: button;\\r\\n          appearance: button;\\r\\n  -webkit-backface-visibility: hidden;\\r\\n          backface-visibility: hidden;\\r\\n  background-color: #486581;\\r\\n  border-radius: 6px;\\r\\n  border-width: 0;\\r\\n  box-shadow: rgba(50, 50, 93, 0.1) 0 0 0 1px inset,\\r\\n    rgba(50, 50, 93, 0.1) 0 2px 5px 0, rgba(0, 0, 0, 0.07) 0 1px 1px 0;\\r\\n  box-sizing: border-box;\\r\\n  color: #fff;\\r\\n  cursor: pointer;\\r\\n  font-family: \\\"Source Code Pro\\\", monospace;\\r\\n  font-size: 100%;\\r\\n  height: 44px;\\r\\n  line-height: 1.15;\\r\\n  margin: 12px 0 0;\\r\\n  outline: none;\\r\\n  overflow: hidden;\\r\\n  padding: 0 25px;\\r\\n  position: relative;\\r\\n  text-align: center;\\r\\n  text-transform: none;\\r\\n  transform: translateZ(0);\\r\\n  transition: all 0.2s, box-shadow 0.08s ease-in;\\r\\n  user-select: none;\\r\\n  -webkit-user-select: none;\\r\\n  touch-action: manipulation;\\r\\n  width: 100%;\\r\\n}\\n.button[_ngcontent-%COMP%]:disabled {\\r\\n  cursor: default;\\r\\n}\\n.button[_ngcontent-%COMP%]:focus {\\r\\n  box-shadow: rgba(50, 50, 93, 0.1) 0 0 0 1px inset,\\r\\n    rgba(50, 50, 93, 0.2) 0 6px 15px 0, rgba(0, 0, 0, 0.1) 0 2px 2px 0,\\r\\n    rgba(50, 151, 211, 0.3) 0 0 0 4px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3N0eWxlcy5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLG9IQUFvSDtBQURwSCw4RUFBOEU7QUFHOUU7RUFDRSx5Q0FBeUM7RUFDekMsY0FBYztFQUNkLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsVUFBVTtFQUNWLHlCQUF5QjtBQUMzQjtBQUVBLGlEQUFpRDtBQUVqRDtFQUNFLG1CQUFtQjtFQUNuQixpSEFBaUg7RUFDakgsb0JBQW9CO0VBQ3BCLHFDQUFxQztBQUN2QztBQUVBO0VBQ0UsVUFBVTtFQUNWLHdCQUFnQjtVQUFoQixnQkFBZ0I7RUFDaEIsU0FBUztFQUNULFVBQVU7RUFDVixhQUFhO0VBQ2IsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQiw0QkFBNEI7RUFDNUI7dUVBQ3FFO0VBQ3JFLFlBQVk7RUFDWixxQkFBcUI7RUFDckIsd0NBQXdDO0VBQ3hDLGVBQWU7RUFDZixvQkFBb0I7RUFDcEI7SUFDRSxhQUFhO0VBQ2Y7RUFDQSx5QkFBeUI7RUFDekI7SUFDRSxhQUFhO0VBQ2Y7RUFDQSxvQkFBb0I7RUFDcEI7SUFDRSxjQUFjO0lBQ2Qsa0NBQWtDO0VBQ3BDO0FBQ0Y7QUFFQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixhQUFhO0FBQ2Y7QUFFQSw0REFBNEQ7QUFFNUQ7RUFDRSwwQkFBa0I7VUFBbEIsa0JBQWtCO0VBQ2xCLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFDM0IseUJBQXlCO0VBQ3pCLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2Y7c0VBQ29FO0VBQ3BFLHNCQUFzQjtFQUN0QixXQUFXO0VBQ1gsZUFBZTtFQUNmLHlDQUF5QztFQUN6QyxlQUFlO0VBQ2YsWUFBWTtFQUNaLGlCQUFpQjtFQUNqQixnQkFBZ0I7RUFDaEIsYUFBYTtFQUNiLGdCQUFnQjtFQUNoQixlQUFlO0VBQ2Ysa0JBQWtCO0VBQ2xCLGtCQUFrQjtFQUNsQixvQkFBb0I7RUFDcEIsd0JBQXdCO0VBQ3hCLDhDQUE4QztFQUM5QyxpQkFBaUI7RUFDakIseUJBQXlCO0VBQ3pCLDBCQUEwQjtFQUMxQixXQUFXO0FBQ2I7QUFFQTtFQUNFLGVBQWU7QUFDakI7QUFFQTtFQUNFOztxQ0FFbUM7QUFDckMiLCJmaWxlIjoiaG9tZS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLyogWW91IGNhbiBhZGQgZ2xvYmFsIHN0eWxlcyB0byB0aGlzIGZpbGUsIGFuZCBhbHNvIGltcG9ydCBvdGhlciBzdHlsZSBmaWxlcyAqL1xyXG5AaW1wb3J0IHVybChcImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9U291cmNlK0NvZGUrUHJvOml0YWwsd2dodEAwLDIwMC4uOTAwOzEsMjAwLi45MDAmZGlzcGxheT1zd2FwXCIpO1xyXG5cclxuYm9keSB7XHJcbiAgZm9udC1mYW1pbHk6IFwiU291cmNlIENvZGUgUHJvXCIsIG1vbm9zcGFjZTtcclxuICBjb2xvcjogI2IzYjNiMztcclxuICBvdmVyZmxvdy14OiBoaWRkZW47XHJcbiAgbWFyZ2luOiAwO1xyXG4gIHBhZGRpbmc6IDA7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzIxMjEyMTtcclxufVxyXG5cclxuLyogZnJvbTogaHR0cHM6Ly9jb2RlcGVuLmlvL3JhdWJhY2EvcGVuL2JHV21aamUgKi9cclxuXHJcbjpyb290IHtcclxuICAtLWFycm93LWJnOiAjNDg2NTgxO1xyXG4gIC0tYXJyb3ctaWNvbjogdXJsKGh0dHBzOi8vdXBsb2FkLndpa2ltZWRpYS5vcmcvd2lraXBlZGlhL2NvbW1vbnMvOS85ZC9DYXJldF9kb3duX2ZvbnRfYXdlc29tZV93aGl0ZXZhcmlhdGlvbi5zdmcpO1xyXG4gIC0tb3B0aW9uLWJnOiAjMjEyMTIxO1xyXG4gIC0tc2VsZWN0LWJnOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7XHJcbn1cclxuXHJcbnNlbGVjdCB7XHJcbiAgLyogUmVzZXQgKi9cclxuICBhcHBlYXJhbmNlOiBub25lO1xyXG4gIGJvcmRlcjogMDtcclxuICBvdXRsaW5lOiAwO1xyXG4gIGZvbnQ6IGluaGVyaXQ7XHJcbiAgLyogUGVyc29uYWxpemUgKi9cclxuICAvKiB3aWR0aDogMjByZW07ICovXHJcbiAgcGFkZGluZzogMXJlbSA0cmVtIDFyZW0gMXJlbTtcclxuICBiYWNrZ3JvdW5kOiB2YXIoLS1hcnJvdy1pY29uKSBuby1yZXBlYXQgcmlnaHQgMC44ZW0gY2VudGVyIC8gMS40ZW0sXHJcbiAgICBsaW5lYXItZ3JhZGllbnQodG8gbGVmdCwgdmFyKC0tYXJyb3ctYmcpIDNlbSwgdmFyKC0tc2VsZWN0LWJnKSAzZW0pO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBib3JkZXItcmFkaXVzOiAwLjI1ZW07XHJcbiAgYm94LXNoYWRvdzogMCAwIDFlbSAwIHJnYmEoMCwgMCwgMCwgMC4yKTtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgLyogUmVtb3ZlIElFIGFycm93ICovXHJcbiAgJjo6LW1zLWV4cGFuZCB7XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG4gIH1cclxuICAvKiBSZW1vdmUgZm9jdXMgb3V0bGluZSAqL1xyXG4gICY6Zm9jdXMge1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICB9XHJcbiAgLyogPG9wdGlvbj4gY29sb3JzICovXHJcbiAgb3B0aW9uIHtcclxuICAgIGNvbG9yOiBpbmhlcml0O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tb3B0aW9uLWJnKTtcclxuICB9XHJcbn1cclxuXHJcbi5tYWluLWNvbnRhaW5lciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgaGVpZ2h0OiAxMDB2aDtcclxufVxyXG5cclxuLyogVGFrZW4gZnJvbTogaHR0cHM6Ly9nZXRjc3NzY2FuLmNvbS9jc3MtYnV0dG9ucy1leGFtcGxlcyAqL1xyXG5cclxuLmJ1dHRvbiB7XHJcbiAgYXBwZWFyYW5jZTogYnV0dG9uO1xyXG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDg2NTgxO1xyXG4gIGJvcmRlci1yYWRpdXM6IDZweDtcclxuICBib3JkZXItd2lkdGg6IDA7XHJcbiAgYm94LXNoYWRvdzogcmdiYSg1MCwgNTAsIDkzLCAwLjEpIDAgMCAwIDFweCBpbnNldCxcclxuICAgIHJnYmEoNTAsIDUwLCA5MywgMC4xKSAwIDJweCA1cHggMCwgcmdiYSgwLCAwLCAwLCAwLjA3KSAwIDFweCAxcHggMDtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICBmb250LWZhbWlseTogXCJTb3VyY2UgQ29kZSBQcm9cIiwgbW9ub3NwYWNlO1xyXG4gIGZvbnQtc2l6ZTogMTAwJTtcclxuICBoZWlnaHQ6IDQ0cHg7XHJcbiAgbGluZS1oZWlnaHQ6IDEuMTU7XHJcbiAgbWFyZ2luOiAxMnB4IDAgMDtcclxuICBvdXRsaW5lOiBub25lO1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgcGFkZGluZzogMCAyNXB4O1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgdGV4dC10cmFuc2Zvcm06IG5vbmU7XHJcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApO1xyXG4gIHRyYW5zaXRpb246IGFsbCAwLjJzLCBib3gtc2hhZG93IDAuMDhzIGVhc2UtaW47XHJcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcclxuICB0b3VjaC1hY3Rpb246IG1hbmlwdWxhdGlvbjtcclxuICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLmJ1dHRvbjpkaXNhYmxlZCB7XHJcbiAgY3Vyc29yOiBkZWZhdWx0O1xyXG59XHJcblxyXG4uYnV0dG9uOmZvY3VzIHtcclxuICBib3gtc2hhZG93OiByZ2JhKDUwLCA1MCwgOTMsIDAuMSkgMCAwIDAgMXB4IGluc2V0LFxyXG4gICAgcmdiYSg1MCwgNTAsIDkzLCAwLjIpIDAgNnB4IDE1cHggMCwgcmdiYSgwLCAwLCAwLCAwLjEpIDAgMnB4IDJweCAwLFxyXG4gICAgcmdiYSg1MCwgMTUxLCAyMTEsIDAuMykgMCAwIDAgNHB4O1xyXG59XHJcbiJdfQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["fetchFromSpotify","request","Validators","i0","AUTH_ENDPOINT","TOKEN_KEY","HomeComponent","constructor","router","fb","Pop","Rock","Jpop","t","configLoading","genres","form","group","genre","required","ngOnInit","get","valueChanges","subscribe","value","console","log","setGenre","authLoading","storedTokenString","localStorage","getItem","storedToken","JSON","parse","expiration","Date","now","token","loadGenres","then","access_token","expires_in","newToken","setItem","stringify","selectedGenre","setDifficulty","selectedDifficulty","startGame","fetchTracks","attempts","maxAttempts","artists","artistList","randomArtist","Math","floor","random","length","endpoint","params","q","type","limit","data","track","tracks","items","preview_url","navigateToPlayPage","error","catch","numOptions","getNumberOfChoices","correctArtist","name","wrongChoices","filter","artist","shuffledChoices","shuffleArray","slice","push","options","navigate","state","diffculty","array","sort","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["M:\\August Cohort\\angular-whos-who-aug-2024-team-4\\src\\app\\home\\home.component.ts","M:\\August Cohort\\angular-whos-who-aug-2024-team-4\\src\\app\\home\\home.component.html"],"sourcesContent":["import { Component, OnInit } from \"@angular/core\";\r\nimport fetchFromSpotify, { request } from \"../../services/api\";\r\nimport { Router } from \"@angular/router\";\r\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\r\n\r\nconst AUTH_ENDPOINT =\r\n  \"https://nuod0t2zoe.execute-api.us-east-2.amazonaws.com/FT-Classroom/spotify-auth-token\";\r\nconst TOKEN_KEY = \"whos-who-access-token\";\r\n\r\n@Component({\r\n  selector: \"app-home\",\r\n  templateUrl: \"./home.component.html\",\r\n  styleUrls: [\"./home.component.css\"],\r\n})\r\nexport class HomeComponent implements OnInit {\r\n  form: FormGroup;\r\n\r\n  constructor(private router: Router, private fb: FormBuilder) {\r\n    this.form = this.fb.group({\r\n      genre: [\"\", Validators.required],\r\n    });\r\n  }\r\n\r\n  genres: String[] = [];\r\n  selectedGenre: String = \"\";\r\n  selectedDifficulty = \"medium\";\r\n  authLoading: boolean = false;\r\n  configLoading: boolean = false;\r\n  token: String = \"\";\r\n  artistList: { [key: string]: string[] } = {\r\n    Pop: [\"Taylor Swift\", \"Justin Bieber\"],\r\n    Rock: [\r\n      \"Linkin Park\",\r\n      \"The Neighbourhood\",\r\n      \"Deftones\",\r\n      \"Green Day\",\r\n      \"Red Hot Chili Peppers\",\r\n      \"Metallica\",\r\n      \"Radiohead\",\r\n      \"Dominic Fike\",\r\n      \"System Of A Down\",\r\n      \"Nickelback\",\r\n      \"Paramore\",\r\n      \"Slipknot\",\r\n      \"Gorillaz\",\r\n      \"Cage The Elephant\",\r\n      \"My Chemical Romance\",\r\n      \"Three Days Grace\",\r\n      \"Bring Me The Horizon\",\r\n      \"Led Zeppelin\",\r\n      \"AC/DC\",\r\n      \"Foo Fighters\",\r\n      \"Muse\",\r\n      \"Alice in Chains\",\r\n      \"Rage Against the Machine\",\r\n    ],\r\n    Jpop: [\"Ado\", \"Yorushika\", \"Reol\", \"Aimer\"],\r\n  };\r\n\r\n  ngOnInit(): void {\r\n\r\n    // Subscribe to valueChanges to call setGenre() whenever the genre changes\r\n    this.form.get(\"genre\")?.valueChanges.subscribe((value) => {\r\n      console.log(\"Value changed to:\", value);\r\n      this.setGenre(value);\r\n    });\r\n\r\n    this.authLoading = true;\r\n    const storedTokenString = localStorage.getItem(TOKEN_KEY);\r\n    if (storedTokenString) {\r\n      const storedToken = JSON.parse(storedTokenString);\r\n      if (storedToken.expiration > Date.now()) {\r\n        console.log(\"Token found in localstorage\");\r\n        this.authLoading = false;\r\n        this.token = storedToken.value;\r\n        this.loadGenres(storedToken.value);\r\n        return;\r\n      }\r\n    }\r\n    console.log(\"Sending request to AWS endpoint\");\r\n    request(AUTH_ENDPOINT).then(({ access_token, expires_in }) => {\r\n      const newToken = {\r\n        value: access_token,\r\n        expiration: Date.now() + (expires_in - 20) * 1000,\r\n      };\r\n      localStorage.setItem(TOKEN_KEY, JSON.stringify(newToken));\r\n      this.authLoading = false;\r\n      this.token = newToken.value;\r\n      this.loadGenres(newToken.value);\r\n    });\r\n  }\r\n\r\n  loadGenres = async (t: any) => {\r\n    this.configLoading = true;\r\n    this.genres = [\"Pop\", \"Rock\", \"Jpop\"];\r\n    this.configLoading = false;\r\n  };\r\n\r\n  setGenre(selectedGenre: any) {\r\n    this.selectedGenre = selectedGenre;\r\n    console.log(this.selectedGenre);\r\n    //console.log(TOKEN_KEY);\r\n  }\r\n\r\n  setDifficulty(selectedDifficulty: any) {\r\n    this.selectedDifficulty = selectedDifficulty;\r\n    console.log(this.selectedDifficulty);\r\n  }\r\n  startGame() {\r\n    // if (!this.selectedGenre || !this.selectedDifficulty) {\r\n    //   return;\r\n    // }\r\n    // if (this.form.valid){\r\n    this.fetchTracks();\r\n    // }\r\n  }\r\n\r\n  fetchTracks(attempts = 1) {\r\n    const maxAttempts = 5;\r\n    const artists = this.artistList[this.selectedGenre as string];\r\n    const randomArtist = artists[Math.floor(Math.random() * artists.length)];\r\n    const endpoint = `search`;\r\n    const params = {\r\n      //q: 'Creedence Clearwater Revival',\r\n      q: `artist:${randomArtist}`,\r\n      type: \"track\",\r\n      limit: 1,\r\n    };\r\n    fetchFromSpotify({ token: this.token, endpoint, params })\r\n      .then((data: any) => {\r\n        const track = data.tracks.items[0];\r\n        if (track && track.preview_url) {\r\n          this.navigateToPlayPage(track, artists);\r\n        } else {\r\n          console.log(data);\r\n          console.error(\"No track preview available for the selected artist.\");\r\n          if (attempts < maxAttempts) {\r\n            console.log(\"retrying\");\r\n            this.fetchTracks(attempts + 1);\r\n          }\r\n        }\r\n      })\r\n      .catch((error: any) => {\r\n        console.error(\"Error fetching tracks:\", error);\r\n        if (attempts < maxAttempts) {\r\n          console.log(\"retrying\");\r\n          this.fetchTracks(attempts + 1);\r\n        }\r\n      });\r\n  }\r\n\r\n  navigateToPlayPage(track: any, artists: string[]) {\r\n    const numOptions = this.getNumberOfChoices();\r\n    const correctArtist = track.artists[0].name;\r\n\r\n    const wrongChoices = artists.filter((artist) => artist !== correctArtist);\r\n    const shuffledChoices = this.shuffleArray([...wrongChoices]).slice(\r\n      0,\r\n      numOptions - 1\r\n    );\r\n    shuffledChoices.push(correctArtist);\r\n\r\n    const options = this.shuffleArray(shuffledChoices);\r\n\r\n    console.log(\"Navigating to play with state:\", {\r\n      track: track,\r\n      options: options,\r\n      correctArtist: correctArtist,\r\n      genre: this.selectedGenre,\r\n      token: this.token,\r\n    });\r\n\r\n    this.router.navigate([\"play\"], {\r\n      state: {\r\n        track: track,\r\n        options: options,\r\n        diffculty: this.selectedDifficulty,\r\n        correctArtist: correctArtist,\r\n        genre: this.selectedGenre,\r\n        token: this.token,\r\n      },\r\n    });\r\n  }\r\n\r\n  getNumberOfChoices() {\r\n    switch (this.selectedDifficulty) {\r\n      case \"easy\":\r\n        return 3;\r\n      case \"medium\":\r\n        return 4;\r\n      case \"hard\":\r\n        return 5;\r\n      default:\r\n        return 4;\r\n    }\r\n  }\r\n\r\n  shuffleArray(array: any[]) {\r\n    return array.sort(() => Math.random() - 0.5);\r\n  }\r\n}\r\n\r\n//Im going to leave the code they provided in comments bellow if in case we need it\r\n\r\n// loadGenres = async (t: any) => {\r\n//   this.configLoading = true;\r\n\r\n//   // #################################################################################\r\n//   // DEPRECATED!!! Use only for example purposes\r\n//   // DO NOT USE the recommendations endpoint in your application\r\n//   // Has been known to cause 429 errors\r\n//   // const response = await fetchFromSpotify({\r\n//   //   token: t,\r\n//   //   endpoint: \"recommendations/available-genre-seeds\",\r\n//   // });\r\n//   // console.log(response);\r\n//   // #################################################################################\r\n\r\n//   this.genres = [\r\n//     \"rock\",\r\n//     \"rap\",\r\n//     \"pop\",\r\n//     \"country\",\r\n//     \"hip-hop\",\r\n//     \"jazz\",\r\n//     \"alternative\",\r\n//     \"j-pop\",\r\n//     \"k-pop\",\r\n//     \"emo\"\r\n//   ]\r\n//   this.configLoading = false;\r\n// };\r\n\r\n// setGenre(selectedGenre: any) {\r\n//   this.selectedGenre = selectedGenre;\r\n//   console.log(this.selectedGenre);\r\n//   console.log(TOKEN_KEY);\r\n// }\r\n","<div *ngIf=\"authLoading || configLoading\">Loading...</div>\r\n\r\n<div class=\"main-container\">\r\n  <div>\r\n    <h1>Who's Who</h1>\r\n\r\n    <div *ngIf=\"!authLoading && !configLoading\" [formGroup]=\"form\">\r\n      Genre:\r\n      <select formControlName=\"genre\">\r\n        <option [value]=\"\"></option>\r\n        <option [value]=\"genre\" *ngFor=\"let genre of genres\">\r\n          {{ genre }}\r\n        </option>\r\n      </select>\r\n    </div>\r\n\r\n    <div *ngIf=\"!authLoading && !configLoading\" [formGroup]=\"form\">\r\n      Difficulty:\r\n      <select formControlName=\"difficulty\">\r\n        <option value=\"easy\">Easy</option>\r\n        <option value=\"medium\">Medium</option>\r\n        <option value=\"hard\">Hard</option>\r\n      </select>\r\n    </div>\r\n\r\n    <div *ngIf=\"showError\" class=\"error-message\">\r\n      Please select a genre before starting the game.\r\n    </div>\r\n  </div>\r\n\r\n  <div>\r\n    <app-button buttonText=\"Play\" (click)=\"startGame()\"></app-button>\r\n    <app-button buttonText=\"Leaderboard\" routerLink=\"/leaderboard\"></app-button>\r\n    <app-button buttonText=\"Game Over\" routerLink=\"/gameover\"></app-button>\r\n  </div>\r\n</div>\r\n"]},"metadata":{},"sourceType":"module"}